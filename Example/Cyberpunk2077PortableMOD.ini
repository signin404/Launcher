[General]
;主程序
application=App\bin\x64\Cyberpunk2077.exe

;命令行
commandline=-modded

;工作目录
;workdir=Data

;临时文件
tempfile=Data

;多实例
;multiple=1

;崩溃清理等待
;单位:毫秒
crashwait=1000

;备份间隔
;单位:分
backuptime=10

;等待检测间隔
;单位:秒
waitcheck=10

;等待进程
;waitprocess=Portable.exe

;前台检测间隔
;单位:秒
foregroundcheck=1

;前台进程名称
foreground=Cyberpunk2077.exe

;挂起进程
suspend=chrome.exe
suspend=TrafficMonitor.exe
suspend=ListaryHelper64.exe
suspend=ListaryHookHelper32.exe
suspend=ListaryHookHelper64.exe
suspend=ListaryService.exe

[Before]
;运行前执行

;用户变量
;变量名 :: 变量值
;设置后可使用 "{Portable}" 引用
;主程序绝对路径 = {APPEXE}
;主程序工作目录 = {WORKDIR}
;主程序目录绝对路径 = {EXEPATH}
;启动器当前驱动器号 = {DRIVE}
;启动器目录绝对路径 = {YAPROOT}
;uservar=Local :: %LocalAppData%
;uservar=LocalLow :: %UserProfile%\AppData\LocalLow
;uservar=Roaming :: %AppData%
;uservar=Documents :: %UserProfile%\Documents
;uservar=ProgramData :: %ProgramData%
;uservar=SavedGames :: %UserProfile%\Saved Games
;uservar=PublicDocuments :: %Public%\Documents

;运行文件
;路径 :: 等待 :: 隐藏 :: 命令行 :: 工作目录
;等待 = wait | null
;隐藏 = hide | null
;run=Other\Install.bat :: null :: hide
;run=%ComSpec% :: null :: hide :: /c nvidia-smi -lgc 2550,2775
;run=..\..\NVIDIAProfileInspector\App\nvidiaProfileInspector.exe :: wait :: hide :: -silent "{YAPROOT}\Other\Driver.nip"
;run=%ComSpec% :: null :: hide :: /c PowerShell -Command ForEach($PROCESS in GET-PROCESS chrome) {$PROCESS.ProcessorAffinity=1044480}

;注册表导入
;regimport=Other\Install.reg

;注册或注销DLL
;注销 = :: unregister
;regdll=App\Portable.dll

;字符串替换
;文本 :: 查找 :: 替换 :: 用户变量
;相同名称将覆盖现有的
;删除 = null
;stringreplace={EXEPATH} :: \ :: \\ :: InstallDir

;创建防火墙规则
;名称 :: 方向 :: 操作 :: 路径
;方向 = in | out
;操作 = block | allow
firewall=Cyberpunk 2077 :: out :: block :: App\bin\x64\Cyberpunk2077.exe
firewall=Cyberpunk 2077 :: in :: block :: App\bin\x64\Cyberpunk2077.exe

;创建硬链接
;目录末尾必须用"\"表示
;hardlink=App\Portable.ini :: Data\Portable.ini

;创建符号链接
;目录末尾必须用"\"表示
symlink={Local}\CD Projekt Red\Cyberpunk 2077\ :: Data\Cyberpunk 2077\
symlink={Documents}\CD Projekt Red\Cyberpunk 2077\ :: Data\Cyberpunk 2077\
symlink={SavedGames}\CD Projekt Red\Cyberpunk 2077\ :: Data\Cyberpunk 2077\
;DLSSTweaks
symlink=App\bin\x64\dxgi.dll :: D:\DLSSTweaks\dxgi.dll
symlink=App\bin\x64\dlsstweaks.ini :: D:\DLSSTweaks\dlsstweaks.ini
;CyberEngineTweaks
symlink=App\bin\x64\plugins\ :: Other\Mod\Library\CyberEngineTweaks\plugins\
symlink=App\bin\x64\global.ini :: Other\Mod\Library\CyberEngineTweaks\global.ini
symlink=App\bin\x64\version.dll :: Other\Mod\Library\CyberEngineTweaks\version.dll
;RED4ext
symlink=App\red4ext\ :: Other\Mod\Library\RED4ext\red4ext\
symlink=App\bin\x64\winmm.dll :: Other\Mod\Library\RED4ext\winmm.dll
;redscript
symlink=App\engine\config\base\scripts.ini :: Other\Mod\Library\redscript\engine\config\base\scripts.ini
symlink=App\engine\tools\ :: Other\Mod\Library\redscript\engine\tools\
symlink=App\r6\config\cybercmd\ :: Other\Mod\Library\redscript\r6\config\cybercmd\
symlink=App\r6\cache\final.redscripts.modded :: Other\Mod\Library\redscript\final.redscripts.modded
symlink=App\r6\cache\final.redscripts.ts :: Other\Mod\Library\redscript\final.redscripts.ts
symlink=App\r6\scripts\ :: Other\Mod\Library\scripts\
;ArchiveXL
symlink=App\r6\config\redsUserHints\ :: Other\Mod\Library\ArchiveXL\r6\config\redsUserHints\
;TweakXL
symlink=App\r6\tweaks\ :: Other\Mod\Library\TweakXL\r6\tweaks\
;Input Loader
symlink=App\engine\config\platform\pc\input_loader.ini :: Other\Mod\Library\Input Loader\engine\config\platform\pc\input_loader.ini
symlink=App\r6\cache\inputContexts.xml :: Other\Mod\Library\Input Loader\r6\cache\inputContexts.xml
symlink=App\r6\cache\inputUserMappings.xml :: Other\Mod\Library\Input Loader\r6\cache\inputUserMappings.xml
symlink=App\r6\input\ :: Other\Mod\Library\input\
;archive
symlink=App\archive\pc\mod\ :: Other\Mod\Library\archive\
;REDMod
symlink=App\mods\ :: Other\Mod\Library\REDMod\
;Better Vehicle Handling
symlink=App\engine\config\platform\pc\vehiclehandling.ini :: Other\Mod\Better Vehicle Handling\engine\config\platform\pc\vehiclehandling.ini
;Psycho Crowds and Traffic Improvements
symlink=App\engine\config\platform\pc\PsychoCrowds3.ini :: Other\Mod\Psycho Crowds and Traffic Improvements\engine\config\platform\pc\PsychoCrowds3.ini
;Realistic Traffic Density
symlink=App\engine\config\platform\pc\CTD[Crowds].ini :: Other\Mod\Realistic Traffic Density\engine\config\platform\pc\CTD[Crowds].ini
symlink=App\engine\config\platform\pc\CTD[Traffic].ini :: Other\Mod\Realistic Traffic Density\engine\config\platform\pc\CTD[Traffic].ini
symlink=App\engine\config\platform\pc\CTD[Vehicle].ini :: Other\Mod\Realistic Traffic Density\engine\config\platform\pc\CTD[Vehicle].ini

;目录保存
;dir={Roaming}\Portable :: Data\Portable

;文件保存
;目录末尾必须用"\"表示
;file={Roaming}\Portable.ini :: Data\

;目录复制移动
;路径 :: 路径 :: 覆盖 :: 移动
;方向 = <- | ->
;移动 = move
;覆盖 = overwrite | no overwrite
;<-dir={Roaming}\Portable :: Data\Portable

;文件复制移动
;路径 :: 路径 :: 覆盖 :: 移动
;方向 = <- | ->
;移动 = move
;覆盖 = overwrite | no overwrite
;<-file={Roaming}\Portable.ini :: Data\Portable.ini

;注册表项保存
;HKU=HKEY_USERS
;HKCR=HKEY_CLASSES_ROOT
;HKCU=HKEY_CURRENT_USER
;HKLM=HKEY_LOCAL_MACHINE
;regkey=HKCU\SOFTWARE\Portable :: Data\Portable.reg

;注册表值保存
;regvalue=HKCU\SOFTWARE\Portable :: Data\Portable.reg

;目录还原
(dir)={Local}\REDEngine

;文件还原
;(file)={Roaming}\Portable.ini

;注册表项还原
;(regkey)=HKCU\SOFTWARE\Portable

;注册表值还原
;(regvalue)=HKCU\SOFTWARE\Portable\Value

;创建目录
+dir=Data\Cyberpunk 2077

;创建文件
;路径 :: 覆盖 :: 格式 :: 编码 :: 内容
;换行 = {LINEBREAK}
;覆盖 = overwrite | no overwrite
;格式 = win | unix | mac
;编码 = utf8 | utf8bom | utf16le | utf16be
+file=Other\Mod\redscript\final.redscripts.modded :: no overwrite
+file=Other\Mod\redscript\final.redscripts.ts :: no overwrite

;创建注册表项
;+regkey=HKCU\SOFTWARE\Portable

;创建注册表值
;项 :: 值 :: 类型 :: 值数据
;REG_SZ | REG_MULTI_SZ | REG_EXPAND_SZ
;REG_DWORD | REG_QWORD | REG_BINARY
;REG_DWORD 为十进制
;REG_BINARY 和 REG_QWORD 用逗号分隔
;REG_EXPAND_SZ 换行符为 {LINEBREAK}
;值数据不写则为空值
;值为 "null" 则写入默认值
;+regvalue=HKCU\SOFTWARE\Portable :: InstallDir :: REG_SZ :: {EXEPATH}

;写入INI
;路径 :: 节 :: 键 :: 值
;若值为 "null" 将删除键
;若节以 "--" 开头将删除节
;若节为 "null" 将写入没有节的键
;iniwrite=Data\Portable.ini :: Settings :: UpdateCheck :: 0

;文本替换
;路径 :: 查找 :: 替换
;换行 = {LINEBREAK}
replace=Other\Mod\CyberEngineTweaks\plugins\cyber_engine_tweaks\config.json :: "language": "Default" :: "language": "ChineseFull"
replace=Other\Mod\CyberEngineTweaks\plugins\cyber_engine_tweaks\config.json :: "path": "" :: "path": "C:/Windows/Fonts/msyh.ttc"

;文本行替换
;路径 :: 查找行开头 :: 替换
;replaceline=Data\Portable.xml :: <InstallDir> :: <InstallDir>{EXEPATH}</InstallDir>

;设置属性
;默认为正常 = :: readonly, hidden, system
;attributes={Roaming}\Portable.ini

;备份目录
;backupdir={Roaming}\Portable :: Data\Portable

;备份文件
;backupfile={Roaming}\Portable.ini :: Data\Portable.ini

;延迟执行
;单位:毫秒
;delay=500

[After]
;退出后执行

;终止进程
;通配符 = ? | *
;killprocess=Portable.exe

;运行文件
;路径 :: 等待 :: 隐藏 :: 命令行 :: 工作目录
;等待 = wait | null
;隐藏 = hide | null
;run=Other\Uninstall.bat :: null :: hide
;run=%ComSpec% :: null :: hide :: /c nvidia-smi -rgc
;run=%ComSpec% :: null :: hide :: /c PowerShell -Command ForEach($PROCESS in GET-PROCESS chrome) {$PROCESS.ProcessorAffinity=1048575}

;注册表导入
;regimport=Other\Uninstall.reg

;注册或注销DLL
;注销 = :: unregister
;regdll=App\Portable.dll :: unregister

;目录复制移动
;路径 :: 路径 :: 覆盖 :: 移动
;方向 = <- | ->
;移动 = move
;覆盖 = overwrite | no overwrite
;->dir={Roaming}\Portable :: Data\Portable

;文件复制移动
;路径 :: 路径 :: 覆盖 :: 移动
;方向 = <- | ->
;移动 = move
;覆盖 = overwrite | no overwrite
;->file={Roaming}\Portable.ini :: Data\Portable.ini

;延迟自动清理
;restore=1

;文件删除
;通配符 = ? | *
-file=App\bin\x64\*.log
-file=App\bin\x64\*.dmp
-file=App\bin\x64\Cyberpunk2077.exe-*
-file=Data\Cyberpunk 2077\CrashInfo.json
-file=Other\Mod\Library\ArchiveXL\red4ext\plugins\ArchiveXL\*.log
-file=Other\Mod\Library\TweakXL\red4ext\plugins\TweakXL\*.log
-file=Other\Mod\Library\Codeware\red4ext\plugins\Codeware\*.log
-file=Other\Mod\Library\CyberEngineTweaks\plugins\cyber_engine_tweaks\*.log

;目录删除
;通配符 = ? | *
;仅为空时删除 = :: ifempty
-dir=App\r6\logs
-dir=Other\Mod\Library\RED4ext\red4ext\logs
-dir={Local}\CD Projekt Red :: ifempty
-dir={Documents}\CD Projekt Red :: ifempty
-dir={SavedGames}\CD Projekt Red :: ifempty
-dir={PublicDocuments}\Steam\RUNE\1091500
-dir={PublicDocuments}\Steam\RUNE :: ifempty
-dir={PublicDocuments}\Steam :: ifempty

;注册表值删除
;通配符 = ? | *
;-regvalue=HKCU\SOFTWARE\Portable :: Value

;注册表项删除
;通配符 = ? | *
;仅为空时删除 = :: ifempty
;-regkey=HKCU\SOFTWARE\Portable
